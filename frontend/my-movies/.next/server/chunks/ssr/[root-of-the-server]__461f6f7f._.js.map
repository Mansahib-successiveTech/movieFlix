{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///home/mansahib.singh/Desktop/movies/frontend/my-movies/src/app/movies/%5Bid%5D/page.jsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport { useParams } from \"next/navigation\";\nimport axios from \"axios\";\n\nexport default function MovieDetails() {\n  const { id } = useParams(); // dynamic id from URL\n  const movieId = id;\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const headers = {\n    authorization: localStorage.getItem(\"token\"),\n  };\n  const addToCart = async () => {\n    try {\n      await axios.post(\n        \"http://localhost:8080/cart/addtocart\",\n        { movieId },\n        { headers }\n      );\n      alert(\"Added to cart\");\n    } catch (err) {\n      console.log(\"error adding to cart\", err.message);\n      alert(err.response?.data?.message || \"Error adding to cart\");\n    }\n  };\n  const addToFavorites = async () => {\n    try {\n      await axios.post(\n        \"http://localhost:8080/fav/addtofav\",\n        { movieId },\n        { headers }\n      );\n      alert(\"Added to favorites\");\n    } catch (err) {\n      console.log(\"error adding to favorites\", err.message);\n      alert(err.response?.data?.message || \"Error adding to favorites\");\n    }\n  };\n  useEffect(() => {\n    if (!id) return;\n\n    const fetchData = async () => {\n      try {\n        console.log(\"Movie ID:\", id);\n\n        const res = await axios.get(\n          `http://localhost:8080/movies/moviebyid/${id}`\n        );\n        setData(res.data.movie);\n\n        // ✅ Check login (token in localStorage)\n        const token = localStorage.getItem(\"token\");\n        if (token) {\n          setIsLoggedIn(true);\n\n          // ✅ Check if user is admin\n          const role = localStorage.getItem(\"role\");\n          if (role === \"admin\") setIsAdmin(true);\n        }\n      } catch (err) {\n        console.error(\"Error fetching movie:\", err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [id]);\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center h-screen bg-zinc-900\">\n        <p className=\"text-white\">Loading...</p>\n      </div>\n    );\n  }\n\n  if (!data) {\n    return (\n      <div className=\"flex justify-center items-center h-screen bg-zinc-900\">\n        <p className=\"text-red-500\">Movie not found.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"px-12 py-8 bg-zinc-900 flex lg:flex-row flex-col gap-7 min-h-screen\">\n      {/* Image Section */}\n      <div className=\"lg:w-1/2 w-full\">\n        <div className=\"bg-zinc-800 p-6 rounded flex justify-center\">\n          <img\n            src={data?.poster || data?.url}\n            alt={data?.title}\n            className=\"lg:h-[70vh] h-[50vh] rounded\"\n          />\n        </div>\n      </div>\n\n      {/* Details Section */}\n      <div className=\"lg:w-1/2 w-full p-4\">\n        <h1 className=\"text-4xl text-zinc-300 font-semibold\">{data?.title}</h1>\n        <p className=\"text-zinc-400 mt-2\">\n          by {data?.director || data?.author}\n        </p>\n        <p className=\"text-zinc-500 mt-4 text-lg\">{data?.desc}</p>\n        <p className=\"flex mt-4 items-center text-zinc-400\">{data?.language}</p>\n        <p className=\"mt-6 text-zinc-100 text-3xl font-semibold\">\n          Price: ₹ {data?.price}\n        </p>\n\n        {/* Action Buttons (only if logged in) */}\n        {isLoggedIn && (\n          <div className=\"mt-8 flex gap-4\">\n            {isAdmin ? (\n              <>\n                <button className=\"px-6 py-2 bg-blue-600 rounded hover:bg-blue-700\">\n                  Modify\n                </button>\n                <button className=\"px-6 py-2 bg-red-600 rounded hover:bg-red-700\">\n                  Delete\n                </button>\n              </>\n            ) : (\n              <>\n                <button\n                  className=\"px-6 py-2 bg-green-400 rounded hover:bg-green-700\"\n                  onClick={addToCart}\n                >\n                  Add to Cart\n                </button>\n                <button\n                  className=\"px-6 py-2 bg-yellow-300 rounded hover:bg-yellow-600\"\n                  onClick={addToFavorites}\n                >\n                  Add to Favorites\n                </button>\n              </>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}