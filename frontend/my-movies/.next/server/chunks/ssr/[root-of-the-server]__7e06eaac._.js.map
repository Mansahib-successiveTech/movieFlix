{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///home/mansahib.singh/Desktop/movies/frontend/my-movies/src/context/AuthContext.jsx"],"sourcesContent":["\"use client\";\n\nimport axios from \"axios\";\nimport { createContext, useContext, useEffect, useState } from \"react\";\n\nconst MyAuthContext = createContext();\n\nexport const AuthProvider = ({ children }) => {\n  const [token, setToken] = useState(null);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [role, setRole] = useState(null); // added role state\n\n  const login = (newToken) => {\n    localStorage.setItem(\"token\", `Bearer ${newToken}`);\n    setToken(newToken);\n    setLoggedIn(true);\n    fetchRole(); // fetch role after login\n  };\n\n  const logout = () => {\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"role\");\n    setToken(null);\n    setLoggedIn(false);\n    setRole(null); // clear role\n    alert(\"user logged out\");\n  };\n\n  const fetchRole = async () => {\n    try {\n      const res = await axios.get(\"http://localhost:8080/user/userInfo\", {\n        headers: {\n          Authorization: localStorage.getItem(\"token\"),\n        },\n      });\n\n      setRole(res.data.user.role); // set role in state\n      localStorage.setItem(\"role\", res.data.user.role); // optional: store in localStorage\n    } catch (err) {\n      console.log(\"Error fetching role:\", err.response?.data || err.message);\n    }\n  };\n\n  useEffect(() => {\n    const data = localStorage.getItem(\"token\");\n    const savedRole = localStorage.getItem(\"role\");\n    if (data) {\n      setLoggedIn(true);\n      if (savedRole) setRole(savedRole); // restore role from localStorage\n      else fetchRole(); // fetch role if not in localStorage\n    } else {\n      setLoggedIn(false);\n    }\n  }, []);\n\n  return (\n    <MyAuthContext.Provider value={{ login, logout, token, loggedIn, role }}>\n      {children}\n    </MyAuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => useContext(MyAuthContext);\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AAKA,MAAM,8BAAgB,IAAA,sNAAa;AAE5B,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC,OAAO,mBAAmB;IAE3D,MAAM,QAAQ,CAAC;QACb,aAAa,OAAO,CAAC,SAAS,CAAC,OAAO,EAAE,UAAU;QAClD,SAAS;QACT,YAAY;QACZ,aAAa,yBAAyB;IACxC;IAEA,MAAM,SAAS;QACb,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,SAAS;QACT,YAAY;QACZ,QAAQ,OAAO,aAAa;QAC5B,MAAM;IACR;IAEA,MAAM,YAAY;QAChB,IAAI;YACF,MAAM,MAAM,MAAM,gJAAK,CAAC,GAAG,CAAC,uCAAuC;gBACjE,SAAS;oBACP,eAAe,aAAa,OAAO,CAAC;gBACtC;YACF;YAEA,QAAQ,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,oBAAoB;YACjD,aAAa,OAAO,CAAC,QAAQ,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,kCAAkC;QACtF,EAAE,OAAO,KAAK;YACZ,QAAQ,GAAG,CAAC,wBAAwB,IAAI,QAAQ,EAAE,QAAQ,IAAI,OAAO;QACvE;IACF;IAEA,IAAA,kNAAS,EAAC;QACR,MAAM,OAAO,aAAa,OAAO,CAAC;QAClC,MAAM,YAAY,aAAa,OAAO,CAAC;QACvC,IAAI,MAAM;YACR,YAAY;YACZ,IAAI,WAAW,QAAQ,YAAY,iCAAiC;iBAC/D,aAAa,oCAAoC;QACxD,OAAO;YACL,YAAY;QACd;IACF,GAAG,EAAE;IAEL,qBACE,8OAAC,cAAc,QAAQ;QAAC,OAAO;YAAE;YAAO;YAAQ;YAAO;YAAU;QAAK;kBACnE;;;;;;AAGP;AAEO,MAAM,UAAU,IAAM,IAAA,mNAAU,EAAC","debugId":null}},
    {"offset": {"line": 182, "column": 0}, "map": {"version":3,"sources":["file:///home/mansahib.singh/Desktop/movies/frontend/my-movies/src/components/Navbar.jsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport Link from \"next/link\";\nimport { FaGripLines } from \"react-icons/fa\";\nimport { useAuth } from \"@/context/AuthContext\";\n\nconst Navbar = () => {\n  const { loggedIn,logout,role } = useAuth();\n \n  const links = [\n    { title: \"Home\", link: \"/home\" },\n    { title: \"All movies\", link: \"/movies\" },\n    { title: \"favorites\", link: \"/fav\" },\n    { title: \"Cart\", link: \"/cart\" },\n    { title: \"Profile\", link: \"/profile\" },\n    { title: \"Admin profile\", link: \"/\" },\n  ];\n  let newlinks=[];\n  if(!loggedIn){\n    newlinks=links.splice(0,2);\n  }\n  else if(role===\"user\")\n   {\n    newlinks=links.splice(0,5);\n   }\nelse if(role===\"admin\"){\n  newlinks=links.splice(0,2).concat(links.splice(-1));\n}\n  const [MobileNav, setMobileNav] = useState(\"hidden\");\n\n  return (\n    <>\n      <nav className=\"  bg-zinc-800 text-white px-8 py-4 w-screen z-40 relative flex items-center justify-between\">\n        <Link href=\"/home\">\n          <div className=\"flex items-center cursor-pointer\">\n            {/* <Image\n              src=\"/movie.jpg\"\n              alt=\"Logo\"\n              width={40}\n              height={40}\n              className=\"me-4\"\n            /> */}\n            <h1 className=\"text-2xl font-semibold\">MovieFlix</h1>\n          </div>\n        </Link>\n\n        <div className=\"nav-links pt-1 block md:flex items-center gap-4\">\n          {/* Desktop Links */}\n          <div className=\"hidden md:flex gap-4 text-yellow-100 font-semibold\">\n            {newlinks.map((item, i) => (\n              <Link\n                href={item.link}\n                className=\"hover:text-blue-500 transition-all duration-300\"\n                key={i}\n              >\n                {item.title}\n              </Link>\n            ))}\n           \n            <div className=\"nav-links block md:flex items-center gap-4\">\n              {!loggedIn?<> <Link\n                href=\"/login\"\n                className=\"text-center text-black w-40 h-7 bg-yellow-400 rounded hover:bg-yellow-300 \"\n              >\n                Login\n              </Link>\n              <Link\n                href=\"/register\"\n                className=\"text-center text-black w-40 h-7 bg-green-300 rounded hover:bg-green-400 \"\n              >\n                Signup\n              </Link></>:<>  <div\n              \n              className=\"text-center text-black w-40 h-7 bg-red-200 rounded hover:bg-red-300 \" onClick={logout}\n            >\n              Logout\n            </div> </>}\n             \n            </div>\n          </div>\n\n          {/* Mobile Toggle Button */}\n          <button\n            className=\"text-white text-xl hover:text-zinc-400 md:hidden block\"\n            onClick={() =>\n              setMobileNav(MobileNav === \"hidden\" ? \"block\" : \"hidden\")\n            }\n          >\n            <FaGripLines />\n          </button>\n        </div>\n      </nav>\n\n      {/* Mobile Menu */}\n      <div\n        className={`${MobileNav} bg-zinc-800 h-screen absolute top-0 left-0 w-full z-40 flex flex-col items-center justify-center`}\n      >\n        {newlinks.map((item, i) => (\n          <Link\n            href={item.link}\n            className=\"hover:text-blue-500 text-yellow-100 text-4xl font-semibold transition-all duration-300 mb-5\"\n            key={i}\n            onClick={() =>\n              setMobileNav(MobileNav === \"hidden\" ? \"block\" : \"hidden\")\n            }\n          >\n            {item.title}\n          </Link>\n        ))}\n        {!loggedIn ? (\n          <>\n            {\" \"}\n            <Link\n              href=\"/\"\n              className=\"text-center w-50 px-4 py-2 bg-yellow-400 rounded hover:bg-blue-300 transition\"\n            >\n              Login\n            </Link>\n            <Link\n              href=\"/login\"\n              className=\"text-center w-50 mt-2 mb-2 px-4 py-2 bg-green-300 rounded hover:bg-green-300 transition\"\n            >\n              Signup\n            </Link>\n          </>\n        ) : (\n          <>\n            {\" \"}\n            <Link\n              href=\"/register\"\n              className=\"text-center w-50 px-4 py-2 bg-red-200 rounded hover:bg-red-300 transition\"\n            >\n              Logout\n            </Link>\n          </>\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default Navbar;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOA,MAAM,SAAS;IACb,MAAM,EAAE,QAAQ,EAAC,MAAM,EAAC,IAAI,EAAE,GAAG,IAAA,yIAAO;IAExC,MAAM,QAAQ;QACZ;YAAE,OAAO;YAAQ,MAAM;QAAQ;QAC/B;YAAE,OAAO;YAAc,MAAM;QAAU;QACvC;YAAE,OAAO;YAAa,MAAM;QAAO;QACnC;YAAE,OAAO;YAAQ,MAAM;QAAQ;QAC/B;YAAE,OAAO;YAAW,MAAM;QAAW;QACrC;YAAE,OAAO;YAAiB,MAAM;QAAI;KACrC;IACD,IAAI,WAAS,EAAE;IACf,IAAG,CAAC,UAAS;QACX,WAAS,MAAM,MAAM,CAAC,GAAE;IAC1B,OACK,IAAG,SAAO,QACd;QACC,WAAS,MAAM,MAAM,CAAC,GAAE;IACzB,OACE,IAAG,SAAO,SAAQ;QACrB,WAAS,MAAM,MAAM,CAAC,GAAE,GAAG,MAAM,CAAC,MAAM,MAAM,CAAC,CAAC;IAClD;IACE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,qBACE;;0BACE,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,uKAAI;wBAAC,MAAK;kCACT,cAAA,8OAAC;4BAAI,WAAU;sCAQb,cAAA,8OAAC;gCAAG,WAAU;0CAAyB;;;;;;;;;;;;;;;;kCAI3C,8OAAC;wBAAI,WAAU;;0CAEb,8OAAC;gCAAI,WAAU;;oCACZ,SAAS,GAAG,CAAC,CAAC,MAAM,kBACnB,8OAAC,uKAAI;4CACH,MAAM,KAAK,IAAI;4CACf,WAAU;sDAGT,KAAK,KAAK;2CAFN;;;;;kDAMT,8OAAC;wCAAI,WAAU;kDACZ,CAAC,yBAAS;;gDAAE;8DAAC,8OAAC,uKAAI;oDACjB,MAAK;oDACL,WAAU;8DACX;;;;;;8DAGD,8OAAC,uKAAI;oDACH,MAAK;oDACL,WAAU;8DACX;;;;;;;yEAEU;;gDAAE;8DAAE,8OAAC;oDAEhB,WAAU;oDAAuE,SAAS;8DAC3F;;;;;;gDAEK;;;;;;;;;;;;;;0CAMR,8OAAC;gCACC,WAAU;gCACV,SAAS,IACP,aAAa,cAAc,WAAW,UAAU;0CAGlD,cAAA,8OAAC,6JAAW;;;;;;;;;;;;;;;;;;;;;;0BAMlB,8OAAC;gBACC,WAAW,GAAG,UAAU,iGAAiG,CAAC;;oBAEzH,SAAS,GAAG,CAAC,CAAC,MAAM,kBACnB,8OAAC,uKAAI;4BACH,MAAM,KAAK,IAAI;4BACf,WAAU;4BAEV,SAAS,IACP,aAAa,cAAc,WAAW,UAAU;sCAGjD,KAAK,KAAK;2BALN;;;;;oBAQR,CAAC,yBACA;;4BACG;0CACD,8OAAC,uKAAI;gCACH,MAAK;gCACL,WAAU;0CACX;;;;;;0CAGD,8OAAC,uKAAI;gCACH,MAAK;gCACL,WAAU;0CACX;;;;;;;qDAKH;;4BACG;0CACD,8OAAC,uKAAI;gCACH,MAAK;gCACL,WAAU;0CACX;;;;;;;;;;;;;;;;AAQb;uCAEe","debugId":null}}]
}