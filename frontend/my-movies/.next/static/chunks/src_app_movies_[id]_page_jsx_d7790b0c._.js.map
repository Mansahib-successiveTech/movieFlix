{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/mansahib.singh/Desktop/movies/frontend/my-movies/src/app/movies/%5Bid%5D/page.jsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport { useParams } from \"next/navigation\";\nimport axios from \"axios\";\n\nexport default function MovieDetails() {\n  const { id } = useParams(); // dynamic id from URL\n  const movieId = id;\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const headers = {\n    authorization: localStorage.getItem(\"token\"),\n  };\n  const addToCart = async () => {\n    try {\n      await axios.post(\n        \"http://localhost:8080/cart/addtocart\",\n        { movieId },\n        { headers }\n      );\n      alert(\"Added to cart\");\n    } catch (err) {\n      console.log(\"error adding to cart\", err.message);\n      alert(err.response?.data?.message || \"Error adding to cart\");\n    }\n  };\n  const addToFavorites = async () => {\n    try {\n      await axios.post(\n        \"http://localhost:8080/fav/addtofav\",\n        { movieId },\n        { headers }\n      );\n      alert(\"Added to favorites\");\n    } catch (err) {\n      console.log(\"error adding to favorites\", err.message);\n      alert(err.response?.data?.message || \"Error adding to favorites\");\n    }\n  };\n  useEffect(() => {\n    if (!id) return;\n\n    const fetchData = async () => {\n      try {\n        console.log(\"Movie ID:\", id);\n\n        const res = await axios.get(\n          `http://localhost:8080/movies/moviebyid/${id}`\n        );\n        setData(res.data.movie);\n\n        // ✅ Check login (token in localStorage)\n        const token = localStorage.getItem(\"token\");\n        if (token) {\n          setIsLoggedIn(true);\n\n          // ✅ Check if user is admin\n          const role = localStorage.getItem(\"role\");\n          if (role === \"admin\") setIsAdmin(true);\n        }\n      } catch (err) {\n        console.error(\"Error fetching movie:\", err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [id]);\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center h-screen bg-zinc-900\">\n        <p className=\"text-white\">Loading...</p>\n      </div>\n    );\n  }\n\n  if (!data) {\n    return (\n      <div className=\"flex justify-center items-center h-screen bg-zinc-900\">\n        <p className=\"text-red-500\">Movie not found.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"px-12 py-8 bg-zinc-900 flex lg:flex-row flex-col gap-7 min-h-screen\">\n      {/* Image Section */}\n      <div className=\"lg:w-1/2 w-full\">\n        <div className=\"bg-zinc-800 p-6 rounded flex justify-center\">\n          <img\n            src={data?.poster || data?.url}\n            alt={data?.title}\n            className=\"lg:h-[70vh] h-[50vh] rounded\"\n          />\n        </div>\n      </div>\n\n      {/* Details Section */}\n      <div className=\"lg:w-1/2 w-full p-4\">\n        <h1 className=\"text-4xl text-zinc-300 font-semibold\">{data?.title}</h1>\n        <p className=\"text-zinc-400 mt-2\">\n          by {data?.director || data?.author}\n        </p>\n        <p className=\"text-zinc-500 mt-4 text-lg\">{data?.desc}</p>\n        <p className=\"flex mt-4 items-center text-zinc-400\">{data?.language}</p>\n        <p className=\"mt-6 text-zinc-100 text-3xl font-semibold\">\n          Price: ₹ {data?.price}\n        </p>\n\n        {/* Action Buttons (only if logged in) */}\n        {isLoggedIn && (\n          <div className=\"mt-8 flex gap-4\">\n            {isAdmin ? (\n              <>\n                <button className=\"px-6 py-2 bg-blue-600 rounded hover:bg-blue-700\">\n                  Modify\n                </button>\n                <button className=\"px-6 py-2 bg-red-600 rounded hover:bg-red-700\">\n                  Delete\n                </button>\n              </>\n            ) : (\n              <>\n                <button\n                  className=\"px-6 py-2 bg-green-400 rounded hover:bg-green-700\"\n                  onClick={addToCart}\n                >\n                  Add to Cart\n                </button>\n                <button\n                  className=\"px-6 py-2 bg-yellow-300 rounded hover:bg-yellow-600\"\n                  onClick={addToFavorites}\n                >\n                  Add to Favorites\n                </button>\n              </>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}